@model MenuViewModel
@using RestaurantSystem.Data.Models.Products;

@{
    var categories = Enum.GetValues(typeof(Category));
}

<form asp-action="Index" asp-route-restaurantId="@Model.RestaurantId" onclick="this.form.submit()" enctype="multipart/form-data">
    <div class="form-group">
        <select onchange="this.form.submit()" asp-for="Category" class="form-control alert-heading">
            <option value="">Изберете всички</option>
            @foreach (var category in categories)
            {
                <option value="@category">@category</option>
            }
        </select>
    </div>
</form>

<table class="table">
    <thead>
        <tr>
            <th scope="col">Име</th>
            <th scope="col">Описание</th>
            <th scope="col">Цена</th>
            <th scope="col">Грамаж</th>
            <th scope="col">Категория</th>
            <th scope="col"></th>
            <th scope="col"></th>

            <th scope="col">
                <a class="btn btn-success btn-sm"
                   asp-action="AddProduct"
                   asp-route-restaurantId="@Model.RestaurantId">
                    <i class="fas fa-plus-circle"></i> <strong>Добави нов</strong>
                </a>
            </th>
        </tr>
    </thead>
    <tbody>

        @foreach (var product in Model.Products)
        {
            <tr>
                <td><strong>@product.Name</strong></td>
                <td>@product.Description.Substring(0, 9)....</td>
                <td>@product.Price.ToString("F2") лв.</td>
                <td>@product.Weight гр.</td>
                <td>@product.Category</td>
                <td>
                    <form asp-action="Edit"
                      asp-route-inStock="@product.InStock"
                      asp-route-productId="@product.Id"
                      asp-route-restaurantId="@product.RestaurantId"
                      enctype="multipart/form-data">
                        <input type="checkbox"
                           value="@product.InStock"
                           checked="@product.InStock"
                           onclick="this.form.submit();" />
                        @(product.InStock  ? "В наличност" : "Не се предлага")
                    </form>
                </td>
                <td>
                    <a class="btn btn-primary btn-sm"
                   asp-action="Edit"
                   asp-route-productId="@product.Id"
                   asp-route-restaurantId="@product.RestaurantId">
                        <i class="fas fa-tools"></i>
                    </a>
                    @*<a class="btn btn-warning btn-sm"
                        asp-action="Details"
                        asp-route-restaurantId="@restaurant.Id">
                        <i class="fas fa-tools"></i>
                        </a>
                        <a class="btn btn-danger btn-sm"
                        asp-action="Edit"
                        asp-route-restaurantId="@restaurant.Id">
                        <i class="fas fa-tools"></i>
                        </a>*@
                </td>
            </tr>
        }
    </tbody>
</table>